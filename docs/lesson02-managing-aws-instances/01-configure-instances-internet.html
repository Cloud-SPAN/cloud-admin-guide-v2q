<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Automated Management of AWS Instances - Configure Instances Internet Access</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../docs/lesson02-managing-aws-instances/02-instances-management.html" rel="next">
<link href="../../docs/lesson02-managing-aws-instances/index.html" rel="prev">
<link href="../../images/cloud-span-icon.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../images/cloud-span-icon.png" alt="Cloud-SPAN logo." class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../docs/miscellanea/precourse-instructions.html"> 
<span class="menu-text">Precourse Instructions</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../docs/miscellanea/about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../docs/lesson02-managing-aws-instances/index.html">Managing AWS Instances</a></li><li class="breadcrumb-item"><a href="../../docs/lesson02-managing-aws-instances/01-configure-instances-internet.html">Configure Instances Internet Access</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../docs/lesson01-setting-work-envs/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Setting Up Cloud/Terminal Environments</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/lesson01-setting-work-envs/01-create-aws-account.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Create Your AWS Account</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/lesson01-setting-work-envs/02-configure-account.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Configure Your AWS Account</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/lesson01-setting-work-envs/03-configure-terminal.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Configure Your Terminal Environment</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/lesson01-setting-work-envs/04-configure-cloudshell.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Configure Your AWS CloudShell Environment</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../docs/lesson02-managing-aws-instances/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Managing AWS Instances</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/lesson02-managing-aws-instances/01-configure-instances-internet.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Configure Instances Internet Access</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/lesson02-managing-aws-instances/02-instances-management.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Instances Management Tasks Using the Scripts</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/lesson02-managing-aws-instances/03-ami-management.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">AMIs Management</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/lesson02-managing-aws-instances/04-scripts-design.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">The Scripts Design</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#outline" id="toc-outline" class="nav-link active" data-scroll-target="#outline">Outline</a>
  <ul class="collapse">
  <li><a href="#steps" id="toc-steps" class="nav-link" data-scroll-target="#steps">Steps</a></li>
  </ul></li>
  <li><a href="#create-your-base-domain-name" id="toc-create-your-base-domain-name" class="nav-link" data-scroll-target="#create-your-base-domain-name">1. Create Your Base Domain Name</a>
  <ul class="collapse">
  <li><a href="#go-to-the-route-53-dashboard" id="toc-go-to-the-route-53-dashboard" class="nav-link" data-scroll-target="#go-to-the-route-53-dashboard">Go to the Route 53 Dashboard</a></li>
  <li><a href="#choose-your-domain-name" id="toc-choose-your-domain-name" class="nav-link" data-scroll-target="#choose-your-domain-name">Choose your domain name</a></li>
  <li><a href="#enter-the-contact-details-for-your-domain" id="toc-enter-the-contact-details-for-your-domain" class="nav-link" data-scroll-target="#enter-the-contact-details-for-your-domain">Enter the contact details for your domain</a></li>
  <li><a href="#check-your-contact-details-and-complete-order" id="toc-check-your-contact-details-and-complete-order" class="nav-link" data-scroll-target="#check-your-contact-details-and-complete-order">Check your contact details and complete order</a></li>
  <li><a href="#make-a-note-of-your-host-zone-name-domain-name-and-host-zone-id" id="toc-make-a-note-of-your-host-zone-name-domain-name-and-host-zone-id" class="nav-link" data-scroll-target="#make-a-note-of-your-host-zone-name-domain-name-and-host-zone-id">Make a note of your host zone name (domain name) and host zone id</a></li>
  </ul></li>
  <li><a href="#create-your-aws-security-group" id="toc-create-your-aws-security-group" class="nav-link" data-scroll-target="#create-your-aws-security-group">2. Create Your AWS Security Group</a>
  <ul class="collapse">
  <li><a href="#go-to-the-security-groups-menu" id="toc-go-to-the-security-groups-menu" class="nav-link" data-scroll-target="#go-to-the-security-groups-menu">Go to the “Security Groups” menu</a></li>
  <li><a href="#create-and-name-your-security-group" id="toc-create-and-name-your-security-group" class="nav-link" data-scroll-target="#create-and-name-your-security-group">Create and name your security group</a></li>
  <li><a href="#create-the-inbound-rules-for-your-security-group" id="toc-create-the-inbound-rules-for-your-security-group" class="nav-link" data-scroll-target="#create-the-inbound-rules-for-your-security-group">Create the inbound rules for your security group</a></li>
  <li><a href="#make-a-note-of-your-security-group-id" id="toc-make-a-note-of-your-security-group-id" class="nav-link" data-scroll-target="#make-a-note-of-your-security-group-id">Make a note of your security group id</a></li>
  </ul></li>
  <li><a href="#select-an-aws-subnet-to-access-the-instances" id="toc-select-an-aws-subnet-to-access-the-instances" class="nav-link" data-scroll-target="#select-an-aws-subnet-to-access-the-instances">3. Select an AWS Subnet to Access the Instances</a>
  <ul class="collapse">
  <li><a href="#go-to-the-virtual-private-cloud-vpc-dashboard" id="toc-go-to-the-virtual-private-cloud-vpc-dashboard" class="nav-link" data-scroll-target="#go-to-the-virtual-private-cloud-vpc-dashboard">Go to the Virtual Private Cloud (VPC) Dashboard</a></li>
  <li><a href="#choose-a-subnet-and-make-a-note-of-its-subnet-id" id="toc-choose-a-subnet-and-make-a-note-of-its-subnet-id" class="nav-link" data-scroll-target="#choose-a-subnet-and-make-a-note-of-its-subnet-id">Choose a subnet and make a note of its subnet-id</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/Cloud-SPAN/nerc-metagenomics-v2q/edit/main/docs/lesson02-managing-aws-instances/01-configure-instances-internet.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/Cloud-SPAN/nerc-metagenomics-v2q/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../docs/lesson02-managing-aws-instances/index.html">Managing AWS Instances</a></li><li class="breadcrumb-item"><a href="../../docs/lesson02-managing-aws-instances/01-configure-instances-internet.html">Configure Instances Internet Access</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Configure Instances Internet Access</h1>
</div>



<div class="quarto-title-meta column-body">

    
  
    
  </div>
  


</header>


<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Prerequisites
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Please read <a href="https://cloud-span.github.io/cloud-admin-guide-0-overview#course-overview">Workshops Organisation</a></strong> if you haven’t done so. To complete this episode you will need:</p>
<ul>
<li>if you are self-studying the course <strong>or</strong> attending a workshop using <strong>your AWS account</strong>:
<ul>
<li>to have created and configured your AWS account as described in Episodes 1 and 2 of Lesson 1, namely: <a href="../../docs/lesson01-setting-work-envs/01-create-aws-account.html">Create Your AWS Account</a> and <a href="../../docs/lesson01-setting-work-envs/02-configure-account.html">Configure Your AWS Account</a>.</li>
<li>the AWS Console login details of your IAM user account: <strong>login page</strong>, <strong>username</strong> and <strong>password</strong>.</li>
</ul></li>
<li>if you are attending a workshop using a <strong>Cloud-SPAN AWS account</strong> (and an AWS Linux instance), you <strong>don’t need</strong> to complete this episode.</li>
</ul>
</div>
</div>
<section id="outline" class="level1">
<h1>Outline</h1>
<section id="steps" class="level2">
<h2 class="anchored" data-anchor-id="steps">Steps</h2>
<p>These are the main steps you will follow to configure internet access for the instances you will create with the Scripts:</p>
<ol type="1">
<li><p><strong>Create Your Base Domain Name</strong><br>
The base domain name you will create will be configured so that the Scripts can create a sub-domain name for each instance. If you are using an <strong>AWS institutional account</strong>, your base domain name may itself be a sub-domain within a domain name managed by your institution. Check the callout at the end of this section to ensure your based domain name is properly configured by you or your IT department.</p></li>
<li><p><strong>Create Your AWS Security Group</strong><br>
An AWS <strong>security group</strong> is a set of rules to configure the Internet communication ports of AWS instances. The security group you will create will enable the communication port used by the <code>ssh</code> program. We only need one security group as all instances need the same configuration. If you are using an <strong>AWS institutional account</strong>, you should not have any problem creating a security group — try to create it; if you cannot then contact your IT deparment.</p></li>
<li><p><strong>Select an AWS Subnet to Access the Instances</strong><br>
An AWS subnet is a network within an AWS region to which the instances created by the Scripts will be connected so that they can be accessed from anywhere. You will select one of the subnets available in the Ireland region. If you are using an <strong>AWS institutional account</strong>, you may be able or need to use a subnet already setup by your IT department — ask them.</p></li>
</ol>
<p>You are going to create those three resources using the AWS Console with your IAM user account. These are the instructions to <strong>login to your IAM account</strong>: - Open a new browser window and enter the address of the login page for your account IAM users. The address contains your account alias or your 12-digit account number and has this form: - https://<strong>youraccountalias</strong>.signin.aws.amazon.com/console - https://<strong>123456789012</strong>.signin.aws.amazon.com/console - Enter your IAM username and password. You may also get a <strong>Security check</strong> to complete. - <strong>Set the region to Ireland</strong> (eu-west-1) if it is not, by clicking on the drop-down menu on the top to the right, see top right on the page below.</p>
</section>
</section>
<section id="create-your-base-domain-name" class="level1">
<h1>1. Create Your Base Domain Name</h1>
<section id="go-to-the-route-53-dashboard" class="level3">
<h3 class="anchored" data-anchor-id="go-to-the-route-53-dashboard">Go to the Route 53 Dashboard</h3>
<p>You are now logged in to your IAM account. To create your base domain name, type <strong>route 53</strong> in the AWS search box at the top and press Enter.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../images/01-instances-internet-access/01-login-n-go-to-route53.png" class="img-fluid figure-img" alt="Screenshot of AWS Console page in a browser with the region drop-down menu on the top right and the AWS search box in the middle top circled" width="900"></p>
<figcaption>.</figcaption>
</figure>
</div>
<p>You will be presented with the “Route 53 Dashboard”. Click on <strong>Register domain</strong>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../images/01-instances-internet-access/02-route53-dashboard-go2-register-domain.png" class="img-fluid figure-img" alt="Screenshot of AWS Console Route 53 Dashboard page in a browser with the option Register domain on the bottom right circled" width="900"></p>
<figcaption>.</figcaption>
</figure>
</div>
</section>
<section id="choose-your-domain-name" class="level3">
<h3 class="anchored" data-anchor-id="choose-your-domain-name">Choose your domain name</h3>
<p>On the page that appears, “Choose a domain name”, you are going to:</p>
<ul>
<li>type your base domain name — <code>awsplaicloud</code> is our domain name in the page below.
<ul>
<li>You cannot use dots (.) but you can use hyphens or minus signs (-) to link a few words, for example: <code>cloud-span</code> or <code>cloud-span-2023</code>.</li>
</ul></li>
<li>click on “<strong>.com -$12.00</strong>” drop-down menu to choose a top level domain (TLD) — <code>.com</code> was our choice.<br>

<ul>
<li>The cheapest TLD in AWS Route 53 is <code>.link</code> at US $5.00 per one year.</li>
</ul></li>
<li>click <strong>Check</strong> to check for the availability of your domain name and TLD.<br>

<ul>
<li>You will be presented with the <strong>Availability for your-domain-name</strong> and a list of <strong>Related domain suggestions</strong>.</li>
</ul></li>
<li>click the <strong>Add to cart</strong> button to the right of the domain name that you want to create (buy).<br>

<ul>
<li>In the page, we have already clicked on the button to the right of <code>awsplaicloud.com</code> which hence appears on the <strong>Shopping cart</strong> (top right).</li>
</ul></li>
<li>scroll down and click <strong>Continue</strong>.</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../images/01-instances-internet-access/03-enter-domain-name-choose-TLD-check-availability-add2cart.png" class="img-fluid figure-img" alt="Two screenshots put together of the AWS Console Choose a domain name page in a browser with the following items circled: on the top left the box to enter a domain, on the top right the drop-down to choose the top-level domain and to the right the Check button to check availabilty, just below that button the Add to cart button, and the bottom right the Continue button." width="900"></p>
<figcaption>.</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../images/01-instances-internet-access/03-enter-domain-name-choose-TLD-check-availability-add2cart-continue.png" class="img-fluid figure-img" width="900"></p>
<figcaption>.</figcaption>
</figure>
</div>
</section>
<section id="enter-the-contact-details-for-your-domain" class="level3">
<h3 class="anchored" data-anchor-id="enter-the-contact-details-for-your-domain">Enter the contact details for your domain</h3>
<p>You will now be presented with the page “Contact Details for Your 1 Domain”. Do as follows in this page:</p>
<ul>
<li>select <strong>Yes</strong> for “<em>My Registrant, Administrative and Technical Contacts are all the same</em>”.</li>
<li>select <strong>Person</strong> for “<em>Contact Type</em>”.</li>
<li>enter your contact details.</li>
<li>scroll down and select <strong>Enable</strong> for “<em>Privacy Protection</em>”.</li>
<li>click <strong>Continue</strong>.</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../images/01-instances-internet-access/04-enter-contact-details-enable-privacy-protection-contact-type-menu.png" class="img-fluid figure-img" alt="Screenshot of AWS Console Contact Details for Your 1 Domain page in a browser with the following two items circled: above the middle to the right, the Yes button for the option My Registrant, Administrative, and Technical Contacts are all the same, and in the middle the Person value for the option Contact Type." width="900"></p>
<figcaption>.</figcaption>
</figure>
</div>
</section>
<section id="check-your-contact-details-and-complete-order" class="level3">
<h3 class="anchored" data-anchor-id="check-your-contact-details-and-complete-order">Check your contact details and complete order</h3>
<p>In the page that appears, “Check your contact details” (not shown below), you will see at the top the contact details for your Registrant Contact, Administrative Contact and Technical Contact — our contacts are not shown.</p>
<p>Scroll down until you see options shown below.</p>
<ul>
<li>select <strong>Disable</strong> for “<em>Do you want to automatically renew your domain?</em>”. If you select <strong>Enable</strong>, your domain name registration will be renewed every year which will incur the same or slightly higher cost every year. You can disable this option later if you prefer.</li>
<li>check the box next to “<em>I have read and agree to the AWS Domain Name Registration Agreement</em>”.</li>
<li>click <strong>Complete Order</strong>.</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../images/01-instances-internet-access/05-select-renewal-option-check-TCs-complete-order.png" class="img-fluid figure-img" alt="Screenshot of AWS Console Check your contact details page but scrolled down so that, that page title is not shown; in the part that is shown, the following items are circled: in the middle left the Disable radio button for option Do you want to automatically renew your domain, in the bottom left the checked checkbox for I have read and agree to the AWS Domain Name Registration Agreement, and on the bottom right the Complete Order button that in a browser with the region menu at the top right and AWS CloudShell option in the middle top circled" width="900"></p>
<figcaption>.</figcaption>
</figure>
</div>
<p>You will then be presented with the page below. First click <strong>Close</strong> and then <strong>Hosted zones</strong> on the left pane.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../images/01-instances-internet-access/06-order-submitted-successfully-message.png" class="img-fluid figure-img" alt="Screenshot of AWS Console Thank you for registering your domain with Route 53 page in a browser showing the callout message Order submitted successfully and the button Close on the bottom right circled; also circled is the option Hosted zones on the top left in the pane menu of the page" width="900"></p>
<figcaption>.</figcaption>
</figure>
</div>
</section>
<section id="make-a-note-of-your-host-zone-name-domain-name-and-host-zone-id" class="level3">
<h3 class="anchored" data-anchor-id="make-a-note-of-your-host-zone-name-domain-name-and-host-zone-id">Make a note of your host zone name (domain name) and host zone id</h3>
<p>In the page that appears, “Hosted zones”, your domain name should be listed as shown in the page below for our domain name <code>awsplaicloud.com</code>.</p>
<p>However, it may take a few (2-3) minutes for your domain name to be registered and hence to appear in the domain name list.</p>
<p>Refresh the page every now and then until your domain name appears. Then click “<strong>your-domain-name</strong>” (awsplaicloud.com).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../images/01-instances-internet-access/09-check-domain-name-n-click-view-details.png" class="img-fluid figure-img" alt="Screenshot of AWS Console Hosted zones page in a browser with the domain name awsplaicloud.com in the middle bottom circled" width="900"></p>
<figcaption>.</figcaption>
</figure>
</div>
<p>In the page that appears, “your-domain-name”, click <strong>Hosted zone details</strong>, and from the details that will be displayed, <strong>make a note</strong> of both the <strong>Hosted zone name</strong> (your domain name) and the <strong>Hosted zone ID</strong> (concealed in dark grey below), as you will use them later to configure the Scripts.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../images/01-instances-internet-access/11-take-note-of-domain-name-n-host-zone-id.png" class="img-fluid figure-img" alt="Screenshot of AWS Console awsplaicloud.com domain name page in a browser with the following items circled: above the middle to the right, the drop-down menu Hosted zone details, in the midle the Hosted zone name and its value awsplaicloud.com, and below the Hosted zone ID with its value hidden." width="900"></p>
<figcaption>.</figcaption>
</figure>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
If you are using an institutional AWS account:
</div>
</div>
<div class="callout-body-container callout-body">
<p>Recall that the base domain name <code>awsplaicloud.com</code> was created with an AWS <strong>personal account</strong> and that instances domain names will have the form <code>instancename-001.awsplaicloud.com</code>, where <code>instancename-001</code> will be a subdomain name within <code>awsplaicloudcom</code>.</p>
<p>If you are using an AWS <strong>institutional account</strong>, your base domain name will likely be something like <code>cloud-span.aws.york.ac.uk</code>, and instances domain names will have the form <code>instancename-001.cloud-span.aws.york.ac.uk</code>, where:</p>
<ul>
<li><code>york.ac.uk</code> is the <strong>base</strong> domain name of the University of York, and has two parts: the domain name <em>per se</em>, <code>york</code>, and the domain suffix or top-level domain (TLD), <code>ac.uk</code>, which must be chosen among various other suffixes such as: <code>.com</code>, <code>.edu</code>, <code>.net</code>, <code>.org</code>, <code>.link</code>, etc.</li>
<li><code>aws</code> is a subdomain managed by the IT department to identify AWS domains used by a department or project within the university — similar subdomains are <code>gcp</code> for Google Cloud Platform, and <code>azure</code> for Microsoft cloud platform.</li>
<li><code>cloud-span</code> is the subdomain configured by the IT department for the Cloud-SPAN project. Note that words separated by a hyphen (-) count as a single word in domain and subdomain names. It is the dot <code>.</code> that separates a domain name into subdomains, though some subdomains pairs are handled as one, for example: <code>co.uk</code> is handled as one TLD by AWS and probably by other providers of domain names.</li>
<li><code>instancename-001</code> is the subdomain for the instance-001 created by the Scripts.</li>
<li><strong>IMPORTANT</strong>: while both <code>cloud-span</code> and <code>instancename-001</code> are both subdomains (within <code>aws.york.ac.uk</code> and <code>cloud-span.aws.york.ac.uk</code> respectively), they are configured differently:
<ul>
<li><code>cloud-span</code> is configured as a <strong>host zone</strong> (as <code>awsplaicloud.com</code> was configured above), and hence has an AWS <strong>host zone id</strong>. You need to configure, or ask your IT department to configure, your base domain name as a host zone so you can configure the Scripts with the corresponding <strong>host zone name</strong> and <strong>host zone id</strong>.</li>
<li><code>instancename-001</code>, <code>instancename-002</code>.., <code>instancename-999</code> are configured by the Scripts as <strong>A Records</strong> (which map domain names to IPv4 addresses) within the specified host zone.</li>
</ul></li>
</ul>
</div>
</div>
</section>
</section>
<section id="create-your-aws-security-group" class="level1">
<h1>2. Create Your AWS Security Group</h1>
<section id="go-to-the-security-groups-menu" class="level3">
<h3 class="anchored" data-anchor-id="go-to-the-security-groups-menu">Go to the “Security Groups” menu</h3>
<p>To create your security group, type <strong>ec2</strong> in the AWS search box at the top and press Enter. Check that you are in the <strong>Ireland</strong> region and set it thus if not.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../images/01-instances-internet-access/12-secgrp-go-to-ec2-dashboard.png" class="img-fluid figure-img" alt="Screenshot of AWS Console page in a browser with the region drop-down menu on the top right and the AWS search box in the middle top circled" width="900"></p>
<figcaption>.</figcaption>
</figure>
</div>
<p>You will be presented with the (Elastic Compute Cloud) “EC2 Dashboard”. On the left menu pane, click on <strong>Security Groups</strong> (under Network &amp; Security) — you may need to scroll down the left menu pane to see Security Groups.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../images/01-instances-internet-access/13-ec2-dashboard-goto-security-group-menu.png" class="img-fluid figure-img" alt="Screenshot of AWS Console EC2 Dashboard page in a browser with the heading EC2 Dashboard on the top left underlined, and the option Security Groups on bottom left circled." width="900"></p>
<figcaption>.</figcaption>
</figure>
</div>
</section>
<section id="create-and-name-your-security-group" class="level3">
<h3 class="anchored" data-anchor-id="create-and-name-your-security-group">Create and name your security group</h3>
<p>On the page that appears, “Security Groups”, click <strong>Create security group</strong> — ignore the <strong>default</strong> security group if it is listed.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../images/01-instances-internet-access/14-ec2-security-groups-menu.png" class="img-fluid figure-img" alt="Screenshot of AWS Console Security Groups page in a browser with the button Create security group circled." width="900"></p>
<figcaption>.</figcaption>
</figure>
</div>
<p>You will be presented with the page “Create security group”. In this page you are going to type a <strong>name</strong> and a <strong>description</strong> for your security group, as shown below:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../images/01-instances-internet-access/15-ec2-security-groups-create-group-name.png" class="img-fluid figure-img" alt="Screenshot of AWS Console Create security group page in a browser with options Security group name and Description circled." width="900"></p>
<figcaption>.</figcaption>
</figure>
</div>
</section>
<section id="create-the-inbound-rules-for-your-security-group" class="level3">
<h3 class="anchored" data-anchor-id="create-the-inbound-rules-for-your-security-group">Create the inbound rules for your security group</h3>
<p>Now scroll down the page until you see the heading <strong>Inbound rules</strong>:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../images/01-instances-internet-access/16-ec2-security-groups-inbound-rules-menu.png" class="img-fluid figure-img" alt="Screenshot of AWS Console Create security group page in a browser, scrolled down and showing the button Add rule circled." width="900"></p>
<figcaption>.</figcaption>
</figure>
</div>
<p>We are going to specify for inbound rules:</p>
<ul>
<li>Click the <strong>Add rule</strong> button four times so that four rows appear.</li>
<li>On the left column (labelled <strong>Type</strong>), select <strong>SSH</strong> for rows 1 and 2 and <strong>Custom TCP</strong> for rows 3 and 4.</li>
<li>On the third column (labelled <strong>Port range</strong>) enter the number <strong>8787</strong> on rows 3 and 4.</li>
<li>On the fourth column (labelled <strong>Source</strong>), select <strong>Anywhere-IPv4</strong> for rows 1 and 3 and <strong>Anywhere-IPv6</strong> for rows 2 and 4.</li>
</ul>
<p>The first four columns of the table should now look like this:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Type</th>
<th>Protocol</th>
<th>Port Range</th>
<th>Source</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>SSH</td>
<td>TCP</td>
<td>22</td>
<td>Anywhere-IPv4</td>
</tr>
<tr class="even">
<td>SSH</td>
<td>TCP</td>
<td>22</td>
<td>Anywhere-IPv6</td>
</tr>
<tr class="odd">
<td>Custom TCP</td>
<td>TCP</td>
<td>8787</td>
<td>Anywhere-IPv4</td>
</tr>
<tr class="even">
<td>Custom TCP</td>
<td>TCP</td>
<td>8787</td>
<td>Anywhere-IPv6</td>
</tr>
</tbody>
</table>
<p>There is no need to define outbound rules nor tags.</p>
<p>Scroll down to the end of the page and click <strong>Create security group</strong>.</p>
</section>
<section id="make-a-note-of-your-security-group-id" class="level3">
<h3 class="anchored" data-anchor-id="make-a-note-of-your-security-group-id">Make a note of your security group id</h3>
<p>You should now see a page like the one below showing the details of your security group including the inbound rules you created. <strong>Make a note</strong> of your <strong>security group id</strong> at the top (concealed in dark grey in the page below), as you will use it later to configure the Scripts.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../images/01-instances-internet-access/19-ec2-security-groups-inbound-rules-created.png" class="img-fluid figure-img" alt="Screenshot of AWS Console Cloud-SPAN Security Group page in a browser showing the security group ID circled but hidden." width="900"></p>
<figcaption>.</figcaption>
</figure>
</div>
</section>
</section>
<section id="select-an-aws-subnet-to-access-the-instances" class="level1">
<h1>3. Select an AWS Subnet to Access the Instances</h1>
<section id="go-to-the-virtual-private-cloud-vpc-dashboard" class="level3">
<h3 class="anchored" data-anchor-id="go-to-the-virtual-private-cloud-vpc-dashboard">Go to the Virtual Private Cloud (VPC) Dashboard</h3>
<p>To select an AWS Subnet, type <strong>vpc</strong> in the AWS search box at the top and press Enter. Check that you are in the <strong>Ireland</strong> region and set it thus if not.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../images/01-instances-internet-access/20-subnet-goto-vpc-dashboard.png" class="img-fluid figure-img" alt="Screenshot of AWS Console page in a browser with the region drop-down menu at the top right and AWS search box in the middle top circled" width="900"></p>
<figcaption>.</figcaption>
</figure>
</div>
<p>You will be presented with the “VPC Dashboard”. Click <strong>Subnets</strong>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../images/01-instances-internet-access/21-subnet-vpc-dashboard.png" class="img-fluid figure-img" alt="Screenshot of AWS Console VPC Dashboard page in a browser with the option Subnet on the menu pane on the left and on the body page on the left circled, and the region drop-down menu on the top right showing Ireland circled as well." width="900"></p>
<figcaption>.</figcaption>
</figure>
</div>
</section>
<section id="choose-a-subnet-and-make-a-note-of-its-subnet-id" class="level3">
<h3 class="anchored" data-anchor-id="choose-a-subnet-and-make-a-note-of-its-subnet-id">Choose a subnet and make a note of its subnet-id</h3>
<p>In the page that appears, “Subnets”, you will see the three subnets available in the Ireland region. Choose one and <strong>make a note</strong> of its subnet-id as you will use it later to configure the Scripts.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../images/01-instances-internet-access/22-subnet-subnets-list.png" class="img-fluid figure-img" alt="Screenshot of AWS Console Subnets page in a browser showing the resource IDs of the subnets available in the Ireland region, in the middle of the page, circled." width="900"></p>
<figcaption>.</figcaption>
</figure>
</div>


</section>
</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/Cloud-SPAN\.github\.io\/cloud-admin-guide-v2q\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation column-body">
  <div class="nav-page nav-page-previous">
      <a href="../../docs/lesson02-managing-aws-instances/index.html" class="pagination-link" aria-label="Managing AWS Instances">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Managing AWS Instances</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../docs/lesson02-managing-aws-instances/02-instances-management.html" class="pagination-link" aria-label="Instances Management Tasks Using the Scripts">
        <span class="nav-page-text">Instances Management Tasks Using the Scripts</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC-BY 4.0</a> 2021–24 by <a href="https://cloud-span.york.ac.uk/">Cloud-SPAN</a></p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/Cloud-SPAN/nerc-metagenomics-v2q/edit/main/docs/lesson02-managing-aws-instances/01-configure-instances-internet.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/Cloud-SPAN/nerc-metagenomics-v2q/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/SpanCloud">
      <i class="bi bi-twitter" role="img" aria-label="Quarto Twitter">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/Cloud-SPAN/nerc-metagenomics-v2q">
      <i class="bi bi-github" role="img" aria-label="Quarto GitHub">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>